{% extends "base.html" %}
{% block title %}Charge Codes Â· Timesheet Helper{% endblock %}
{% block content %}
<section class="card">
    <h1>Charge Codes</h1>
    <form method="post" class="form-grid">
        <label>
            Project Number
            <input type="text" name="project_number" required>
        </label>
        <label>
            Task Number
            <input type="text" name="task_number" required>
        </label>
        <label>
            Description
            <input type="text" name="description" required>
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="is_active" checked>
            <span>Active</span>
        </label>
        <button type="submit" class="btn primary">Add Charge Code</button>
    </form>
</section>

<section class="card">
    <h2>Saved Codes</h2>
    {% if charge_codes %}
    <table class="data-table">
        <thead>
            <tr>
                <th>Project</th>
                <th>Task</th>
                <th>Description</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for code in charge_codes %}
            <tr class="{% if not code['is_active'] %}inactive-row{% endif %}">
                <td>{{ code['project_number'] }}</td>
                <td>{{ code['task_number'] }}</td>
                <td>{{ code['description'] }}</td>
                <td>
                    {% if code['is_active'] %}
                    <span class="status active">Active</span>
                    {% else %}
                    <span class="status inactive">Inactive</span>
                    {% endif %}
                </td>
                <td>
                    <form method="post" class="inline-form">
                        <input type="hidden" name="action" value="toggle">
                        <input type="hidden" name="code_id" value="{{ code['id'] }}">
                        <input type="hidden" name="set_active" value="{% if code['is_active'] %}0{% else %}1{% endif %}">
                        {% if code['is_active'] %}
                        <button type="submit" class="btn small tertiary">Set Inactive</button>
                        {% else %}
                        <button type="submit" class="btn small secondary">Set Active</button>
                        {% endif %}
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="muted">No charge codes yet. Add your first code above.</p>
    {% endif %}
</section>
{% endblock %}
